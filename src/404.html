<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      var location = window.location;

      // like ?skillLevel=beginner
      var search = location.search;
      console.log("search:", search);

      var pathName = location.pathname;
      console.log("pathName:", pathName);

      var pathNameEncoded = encodeURIComponent(pathName);
      console.log("pathNameEncoded:", pathNameEncoded);

      var newSearch;
      if (search && search.length > 0 && search[0] === "?") {
        newSearch = search + "&p=" + pathNameEncoded;
      } else {
        newSearch = "?p=" + pathNameEncoded;
      }
      console.log("newSearch:", newSearch);

      // don't include the pathname (e.g. '/badges')
      const newUrl = location.origin + newSearch;
      console.log("newUrl:", newUrl);

      location.replace(newUrl);
    </script>
  </head>
  <body>
  </body>
</html>